#!/usr/bin/env php
<?php

/**
 * Test CLI Script â€” Subscription Lifecycle
 *
 * Runs: Tests\SubscriptionLifecycleTest via PHPUnit
 * Usage: php console/test/subscription-lifecycle
 *
 * Requires: migration must have been run (php console/migration up)
 *
 * @since 2026
 * @author Samuelle Langlois
 */

/**
 * Variables
 */
$root    = realpath( __DIR__ . '/../..' ); // Project root
$phpunit = $root . '/vendor/phpunit/phpunit/phpunit';
$config  = $root . '/phpunit.xml';
$test    = $root . '/tests/SubscriptionLifecycleTest.php';

/**
 * Run PHPUnit on the specific test file
 */
passthru(
    PHP_BINARY . ' ' . escapeshellarg( $phpunit )
    . ' --configuration ' . escapeshellarg( $config )
    . ' ' . escapeshellarg( $test ),
    $exit_code
);

exit( $exit_code );
